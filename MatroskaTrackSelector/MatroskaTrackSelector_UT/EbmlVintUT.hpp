#include "UTCommon.hpp"

//#define private public
#include "EbmlVint.h"

namespace EbmlVintUT
{

    void run_tests()
    {
        // 2 test numbers of all possible sizes (1-8) including highest and lowest
        array<array<uint64_t, 20>, 8> test_numers
        {{  // Lowest                Highest                       // Random . . .
            {(uint64_t)1 << (7 * 0), ((uint64_t)1 << (7 * 1)) - 1, 27, 31, 31, 34, 50, 51, 75, 82, 86, 101, 103, 104, 109, 111, 111, 118, 119, 124},
            {(uint64_t)1 << (7 * 1), ((uint64_t)1 << (7 * 2)) - 1, 248, 1045, 1131, 2559, 2973, 3657, 5452, 6395, 6731, 7168, 9200, 9338, 10970, 12588, 14175, 14610, 14760, 15367},
            {(uint64_t)1 << (7 * 2), ((uint64_t)1 << (7 * 3)) - 1, 140796, 264559, 428669, 688453, 721654, 840190, 938182, 1164168, 1191577, 1220115, 1279345, 1381193, 1418264, 1457096, 1905443, 1940963, 1988297, 2065751},
            {(uint64_t)1 << (7 * 3), ((uint64_t)1 << (7 * 4)) - 1, 40970286, 86915423, 96711102, 119061643, 133049928, 136569640, 139165369, 140072305, 161808634, 169901006, 181584433, 186871487, 198902309, 204604180, 229984656, 239339532, 245971116, 252234415},
            {(uint64_t)1 << (7 * 4), ((uint64_t)1 << (7 * 5)) - 1, 2495702865, 2574499854, 5319442231, 6195671577, 6492248059, 6632791528, 17604161643, 17728111066, 17835943240, 20187066478, 20474805079, 23571702005, 24541140054, 24662575625, 26230746700, 26685833592, 27030561792, 33420826355},
            {(uint64_t)1 << (7 * 5), ((uint64_t)1 << (7 * 6)) - 1, 516759950759, 621696344516, 1370276171952, 1440518178163, 1578998019968, 1738238046667, 1856332785316, 1909678464681, 2034050794732, 2336832427929, 2349969805030, 2480609594209, 3413482704222, 3655860348867, 3797110407044, 3922885406855, 4001488924319, 4127928325690},
            {(uint64_t)1 << (7 * 6), ((uint64_t)1 << (7 * 7)) - 1, 51237041812331, 108684746084201, 113838078434396, 139140362044484, 163658893123169, 170905377522026, 224064426722024, 255376079006240, 314033177154943, 400361539731835, 411375357683730, 418482786709021, 432337323735180, 435723420777638, 441021459221905, 500228548032548, 506272500790991, 535515200285909},
            {(uint64_t)1 << (7 * 7), ((uint64_t)1 << (7 * 8)) - 1, 1571270601310692, 7926133315385793, 10857279365234089, 19446974528766037, 26205900901355777, 26858953305034704, 27430366642827089, 33276201741536294, 40355874781341996, 43402158510094958, 45601963934817491, 50807661939917838, 51074721362612020, 54376137786996403, 62124605822135768, 63948232542821231, 64167875146839313, 66253098173713352}
        }};
        EbmlVint<true> vint = 0x80 | 12;
        //vint = 
        REQUIRE(vint.get_value() == 12);
    }

    void no_marker()
    {

    }

}